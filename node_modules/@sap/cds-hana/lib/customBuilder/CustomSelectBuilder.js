const SelectBuilder = require('@sap/cds-sql').builder.SelectBuilder

class CustomSelectBuilder extends SelectBuilder {
  get ExpressionBuilder () {
    const ExpressionBuilder = require('./CustomExpressionBuilder')
    Object.defineProperty(this, 'ExpressionBuilder', { value: ExpressionBuilder })
    return ExpressionBuilder
  }

  get ReferenceBuilder () {
    const ReferenceBuilder = require('./CustomReferenceBuilder')
    Object.defineProperty(this, 'ReferenceBuilder', { value: ReferenceBuilder })
    return ReferenceBuilder
  }

  _val (obj) {
    if (typeof obj.val === 'boolean') {
      return obj.val ? 'true' : 'false'
    }

    return obj.val
  }
}

module.exports = CustomSelectBuilder
