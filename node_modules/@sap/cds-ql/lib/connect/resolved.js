const path = require('path')

const resolved = (givenPath, file) => {
  // first try to load w/o executing
  let resolved

  try {
    resolved = require.resolve(path.resolve(givenPath, file))
  } catch (err) {
    if (err.code !== 'MODULE_NOT_FOUND') {
      throw err
    }
  }

  // then execute w/o ignoring errors
  if (resolved) {
    return require(resolved)
  }
}

module.exports = resolved
