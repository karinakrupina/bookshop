'use strict';

const Command = require('../Command');
const BatchExecutionInfoSerialProcessor = require('../../batch/BatchExecutionInfoSerialProcessor');

/**
 * Starts the execution of ordered command lists
 *
 * @extends Command
  */
class BatchExecutionCommandListsProcessorCommand extends Command {

    /**
     * Constructor
     *
     * @param {BatchContext} batchContext The current batch context instance
     */
    constructor(batchContext) {
        super();

        /**
         * Batch context
         * @type {BatchContext}
         * @private
         */
        this._batchContext = batchContext;
    }


    /**
     * Executes the BatchExecutionInfoSerialProcessor.
     * The builder is obtained from the component manager of the service,
     * so it can be overwritten by the application.
     *
     * @param {Command~Next} next The callback to execute inside the listener.
     */
    execute(next) {
        const processor = new BatchExecutionInfoSerialProcessor(this._batchContext);
        processor.process(next);
    }

}

module.exports = BatchExecutionCommandListsProcessorCommand;
