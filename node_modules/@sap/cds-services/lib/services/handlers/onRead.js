const { DB_CONNECTION_MISSING } = require('../utils/constants')

/**
 * Generic Handler for READ requests.
 *
 * @param context - operation object, that provides error, continuation and other functions as well as information
 * regarding the current operation.
 * @alias module:handlers.onRead
 */
const onRead = () => context => {
  if (!context.run) {
    context.log.warn(DB_CONNECTION_MISSING)
    return Promise.resolve([])
  }

  return context.run(context.query)
}

module.exports = onRead
