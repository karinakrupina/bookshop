const Client = require('./Client')
const cds = require('../../cds')

const _getService = serviceNameOrPath => {
  const service = cds.service.providers.find(provider => {
    return provider._options.at === serviceNameOrPath || provider.name === serviceNameOrPath
  })

  return service
}

const forService = serviceNameOrPath => {
  const service = _getService(serviceNameOrPath)

  if (service) {
    return new Client(service)
  }
}

module.exports = forService
